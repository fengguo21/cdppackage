(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-720190fa"],{"355b":function(e,t,a){"use strict";var s=a("ce84"),i=a.n(s);i.a},"74de":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contanir"},[a("div",{staticClass:"box clearfix"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"statistics"},[a("h4",[e._v("本周销售")]),e._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"thisWeek"},[a("p",{staticClass:"p1"},[e._v("本周已完成")]),e._v(" "),a("p",{staticClass:"p2"},[e._v(e._s(e.cardList.week))])]),e._v(" "),a("div",{staticClass:"nextWeek"},[a("p",{staticClass:"p1"},[e._v("上周已完成")]),e._v(" "),a("p",{staticClass:"p2"},[e._v(e._s(e.cardList.last_week))])])])]),e._v(" "),a("el-progress",{staticClass:"circlePre",attrs:{type:"circle",percentage:e.cardList.week_rate,status:"text"}},[a("p",[e._v(e._s(e.cardList.week_rate)+"%")]),e._v(" "),a("p",[e._v("环比")])])],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"statistics"},[a("h4",[e._v("本月销售")]),e._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"thisWeek"},[a("p",{staticClass:"p1"},[e._v("已完成")]),e._v(" "),a("p",{staticClass:"p2"},[e._v(e._s(e.cardList.month))])]),e._v(" "),a("div",{staticClass:"nextWeek"},[a("p",{staticClass:"p1"},[e._v("目标")]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!e.ismonth,expression:"!ismonth"}],staticClass:"p2"},[e._v("\n              "+e._s(e.cardList.month_tar)+"\n              "),a("span",{staticClass:"set_btn",on:{click:function(t){return e.setMonthNum()}}},[e._v("设置")])]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.ismonth,expression:"ismonth"}],staticClass:"ipt",attrs:{autofocus:"autofocus",size:"mini"},model:{value:e.monthval,callback:function(t){e.monthval=t},expression:"monthval"}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.ismonth,expression:"ismonth"}],attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.changeMonthNum(e.monthval)}}},[e._v("确认")])],1)])]),e._v(" "),a("el-progress",{staticClass:"circlePre",attrs:{type:"circle",percentage:e.cardList.month_rate,status:"text"}},[a("p",[e._v(e._s(e.cardList.month_rate)+"%")]),e._v(" "),a("p",[e._v("完成进度")])])],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"statistics"},[a("h4",[e._v("全年销售")]),e._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"thisWeek"},[a("p",{staticClass:"p1"},[e._v("已完成")]),e._v(" "),a("p",{staticClass:"p2"},[e._v(e._s(e.cardList.year))])]),e._v(" "),a("div",{staticClass:"nextWeek"},[a("p",{staticClass:"p1"},[e._v("目标")]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!e.isyear,expression:"!isyear"}],staticClass:"p2"},[e._v("\n              "+e._s(e.cardList.year_tar)+"\n              "),a("span",{staticClass:"set_btn",on:{click:function(t){return e.setYearNum()}}},[e._v("设置")])]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isyear,expression:"isyear"}],staticClass:"ipt",attrs:{size:"mini"},model:{value:e.yearval,callback:function(t){e.yearval=t},expression:"yearval"}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isyear,expression:"isyear"}],attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.changeYearNum(e.yearval)}}},[e._v("确认")])],1)])]),e._v(" "),a("el-progress",{staticClass:"circlePre",attrs:{type:"circle",percentage:e.cardList.year_rate,status:"text"}},[a("p",[e._v(e._s(e.cardList.year_rate)+"%")]),e._v(" "),a("p",[e._v("完成进度")])])],1)],1),e._v(" "),a("div",{staticClass:"operation clearfix"},[a("div",{staticClass:"block"},[a("el-button",{staticStyle:{float:"right",margin:"2px 0 0 10px"},attrs:{type:"primary",size:"mini"},on:{click:e.reDate}},[e._v("重置")]),e._v(" "),a("el-button",{staticStyle:{float:"right",margin:"2px 0 0 10px"},attrs:{type:"primary",size:"mini"},on:{click:e.query}},[e._v("确认")]),e._v(" "),a("el-date-picker",{staticClass:"timepick",attrs:{type:"daterange",align:"right",clearable:!1,size:"small","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)]),e._v(" "),a("div",{staticClass:"tab"},[a("ul",{staticClass:"choose-table clearfix"},e._l(e.list,function(t){return a("li",{key:t.type,class:["choose-one",t.id===e.currentId?"checked":""],on:{click:function(a){return e.choose(t.type,t.tit,t.id)}}},[a("p",{staticClass:"h1"},[e._v(e._s(t.tit))]),e._v(" "),a("p",{staticClass:"h2"},[e._v(e._s(e.labelList[t.type]))]),e._v(" "),a("p",{staticClass:"h3"},[e._v("\n          环比    \n          "),a("span",[e._v(e._s(e.labelList[t.hb]))]),e._v(" "),a("i",{staticClass:"icon"})]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:e.currentId==t.id,expression:"currentId == item.id ? true:false"}],staticClass:"current"})])}),0),e._v(" "),a("div",{staticClass:"linechart"},[a("line-chart",{attrs:{"chart-data":e.lineChartData}})],1)]),e._v(" "),a("div",{staticClass:"commodity"},[a("div",{staticClass:"head_operate"},[a("h4",[e._v("全量商品排行")]),e._v(" "),a("div",{staticClass:"fright"},[a("el-input",{attrs:{placeholder:"请输入商品名称、ID、URL或货号",size:"small"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e._v(" "),a("download-excel",{staticClass:"export-excel-wrapper",attrs:{data:e.json_data,fields:e.json_fields,name:"goodsAnalyse.xls"}},[a("i",{staticClass:"el-icon-download"},[e._v("下载")])])],1)]),e._v(" "),a("div",{staticClass:"select_list clearfix"},[a("div",{staticClass:"access_type"},[a("p",[e._v("访问类")]),e._v(" "),a("el-checkbox-group",{on:{change:e.checked},model:{value:e.checkedAccess,callback:function(t){e.checkedAccess=t},expression:"checkedAccess"}},e._l(e.accessType,function(t){return a("el-checkbox",{key:t.type,staticClass:"checkone",attrs:{label:t.name,disabled:e.tableList.length>=5&&-1==e.tableList.indexOf(t)}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),a("div",{staticClass:"into_class"},[a("p",[e._v("转化类")]),e._v(" "),a("el-checkbox-group",{on:{change:e.checked},model:{value:e.checkedInto,callback:function(t){e.checkedInto=t},expression:"checkedInto"}},e._l(e.intoClass,function(t){return a("el-checkbox",{key:t.type,staticClass:"checkone",attrs:{label:t.name,disabled:e.tableList.length>=5&&-1==e.tableList.indexOf(t)}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),a("div",{staticClass:"service_class"},[a("p",[e._v("服务类")]),e._v(" "),a("el-checkbox-group",{on:{change:e.checked},model:{value:e.checkedService,callback:function(t){e.checkedService=t},expression:"checkedService"}},e._l(e.serviceClass,function(t){return a("el-checkbox",{key:t.type,staticClass:"checkone",attrs:{label:t.name,disabled:e.tableList.length>=5&&-1==e.tableList.indexOf(t)}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),a("div",{staticClass:"reset"},[a("span",[e._v("选择 "+e._s(e.tableList.length)+"/5")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.reSet}},[e._v("重置")])],1)]),e._v(" "),a("div",{staticClass:"commodity_list clearfix"},[a("el-table",{staticClass:"list",staticStyle:{width:"100%"},attrs:{data:e.commodityList}},[a("el-table-column",{attrs:{label:"商品",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"clearfix"},[a("img",{staticClass:"pic",attrs:{src:t.row.spu_picture}}),e._v(" "),a("div",{staticClass:"commodity_content"},[a("p",{staticClass:"commodity_name"},[e._v(e._s(t.row.spu_name))]),e._v(" "),a("p",[a("span",[e._v(e._s(t.row.spu_sn))]),e._v(" "),a("span",{staticClass:"fright"},[e._v("环比")])])])])]}}])}),e._v(" "),e._l(e.tableList,function(t){return a("el-table-column",{key:t.type,attrs:{label:t.name},scopedSlots:e._u([{key:"default",fn:function(s){return[a("p",{staticClass:"num"},[e._v(e._s(s.row[t.type]))]),e._v(" "),a("p",{staticClass:"pre ccc"},[e._v(e._s(s.row[t.hb]))])]}}],null,!0)})}),e._v(" "),a("el-table-column",{attrs:{label:"操作"}},[a("div",[a("p",{staticClass:"detail"},[e._v("详情")]),e._v(" "),a("p",{staticClass:"attent"},[e._v("关注")])])])],2),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.current,"page-size":e.pgSize,layout:"prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"current-change":e.changePage}})],1)])])},i=[],r=(a("724b"),a("59eb")),n=(a("0175"),a("9a44"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})}),c=[],o=a("34de"),l=a.n(o),h=a("ed08"),_={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null,sidebarElm:null}},watch:{chartData:{deep:!0,handler:function(e){this.setOptions(e)}}},mounted:function(){var e=this;this.initChart(),this.autoResize&&(this.__resizeHandler=Object(h["a"])(function(){e.chart&&e.chart.resize()},100),window.addEventListener("resize",this.__resizeHandler)),this.sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.sidebarElm&&this.sidebarElm.addEventListener("transitionend",this.sidebarResizeHandler)},beforeDestroy:function(){this.chart&&(this.autoResize&&window.removeEventListener("resize",this.__resizeHandler),this.sidebarElm&&this.sidebarElm.removeEventListener("transitionend",this.sidebarResizeHandler),this.chart.dispose(),this.chart=null)},methods:{sidebarResizeHandler:function(e){"width"===e.propertyName&&this.__resizeHandler()},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expectedData,a=e.actualData;this.chart.setOption({title:{text:this.chartData.tit,textStyle:{fontSize:16,color:"#404040",fontWeight:400}},grid:{left:20,right:20,bottom:20,top:60,containLabel:!0},xAxis:{data:this.chartData.xdate,boundaryGap:!1,axisTick:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1},axisLine:{show:!1}},legend:{data:[this.chartData.date,""],right:10},series:[{name:this.chartData.date,itemStyle:{normal:{color:"#3888fa",lineStyle:{color:"#3888fa",width:2}}},smooth:!0,type:"line",data:t,animationDuration:2800,animationEasing:"cubicInOut"},{name:"对比日",smooth:!0,type:"line",itemStyle:{normal:{color:"#3888fa",lineStyle:{color:"#3888fa",width:2},areaStyle:{color:"#f3f8ff"}}},data:a,animationDuration:2800,animationEasing:"quadraticOut"}]})},initChart:function(){this.chart=l.a.init(this.$el),this.setOptions(this.chartData)}}},d=_,p=a("f44b"),u=Object(p["a"])(d,n,c,!1,null,null,null),v=u.exports,m=a("b775");function b(){return Object(m["a"])({url:"/app/business/goodstarget",method:"get"})}function y(e){return Object(m["a"])({url:"/app/business/settarget",method:"post",data:e})}function f(e,t,a){return Object(m["a"])({url:"/app/business/goodsAnalyse",method:"get",params:{start_time:e,end_time:t,page:a,pagerows:10}})}function g(e,t){return Object(m["a"])({url:"/app/business/goodsline",method:"get",params:{start_time:e,end_time:t}})}var C=function(e){var t=new Date,a=t.getTime()+864e5*e;t.setTime(a);var s=t.getMonth(),i=t.getDate();return s=k(s+1),i=k(i),s+"."+i};function k(e){var t=e;return 1===e.toString().length&&(t="0"+e),t}function w(e,t){var a=function(e){var t=new Date,a=e.split("-");return t.setFullYear(a[0]),t.setMonth(a[1]-1),t.setDate(a[2]),t},s=a(e),i=a(t);if(s>i){var r=s;s=i,i=r}s.setDate(s.getDate()+1);var n=[],c=0;while(s.getFullYear()!==i.getFullYear()||s.getMonth()!==i.getMonth()||s.getDate()!==i.getDate()){var o=s.getDate().toString();1===o.length&&(o="0"+o),n[c]=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+o,c++,s.setDate(s.getDate()+1)}return n.splice(0,0,e),n.push(t),n}var x=[{name:"商品访客数",type:"uv",hb:"uvhb"},{name:"商品浏览量",type:"pv",hb:"pvhb"},{name:"平均停留时长",type:"duration",hb:"durationhb"},{name:"商品详情跳出率",type:"jumpr",hb:"jumprhb"},{name:"商品加购人数",type:"cart_uv",hb:"cart_uvhb"},{name:"商品加购件数",type:"cart_pv",hb:"cart_pvhb"},{name:"商品收藏人数",type:"save_user",hb:"save_userhb"},{name:"搜索引导访客数",type:"search_user",hb:"search_userhb"}],L=[{name:"下单买家数",type:"order_user",hb:"order_userhb"},{name:"下单件数",type:"order_num",hb:"order_numhb"},{name:"下单金额",type:"order_income",hb:"order_incomehb"},{name:"下单转化率",type:"order_rate",hb:"order_ratehb"},{name:"支付买家数",type:"pay_user",hb:"pay_userhb"},{name:"支付件数",type:"pay_num",hb:"pay_numhb"},{name:"支付金额",type:"pay_income",hb:"pay_incomehb"},{name:"支付转化率",type:"pay_rate",hb:"pay_ratehb"},{name:"支付新买家数",type:"pay_new_user",hb:"pay_new_userhb"},{name:"支付老买家数",type:"pay_old_user",hb:"pay_old_userhb"},{name:"新买家支付金额",type:"pay_new_income",hb:"pay_new_incomehb"},{name:"老买家支付金额",type:"pay_old_income",hb:"pay_old_incomehb"},{name:"搜索引导支付买家数",type:"search_pay",hb:"search_payhb"},{name:"搜索引导支付转化率",type:"search_pay_income",hb:"search_pay_incomehb"}],D=[{name:"售中售后成功退款金额",type:"",hb:""}],S={components:{LineChart:v},data:function(){return{ismonth:!1,monthval:"",isyear:!1,yearval:"",checkedAccess:["商品访客数","商品浏览量","平均停留时长"],checkedInto:["下单件数","下单金额"],checkedService:[],tableList:[],accessType:x,intoClass:L,serviceClass:D,search:"",name:"商品访客数",date:"",cardList:{},list:[{tit:"商品访客数",type:"uv",hb:"uv_hb",id:1},{tit:"商品浏览量",type:"pv",hb:"pv_hb",id:2},{tit:"有访问商品数",type:"goods_num",hb:"goods_num_hb",id:3},{tit:"商品平均停留时长",type:"duration",hb:"duration_hb",id:4},{tit:"商品详情页跳出率",type:"jumpr",hb:"jumpr_hb",id:5},{tit:"商品收藏人数",type:"save_user",hb:"save_user_hb",id:6}],labelList:[],currentId:1,lineChartData:{tit:"商品访客数",actualData:[],xdate:[],date:"近七天"},chartsLine:[],commodityList:[],json_fields:{spu_id:"spu_id",spu_name:"spu_name",spu_picture:"spu_picture",spu_sn:"spu_sn",duration:"duration",jumpr:"jumpr",pv:"pv",uv:"uv",cart_pv:"cart_pv",cart_uv:"cart_uv",save_user:"save_user",search_user:"search_user",order_income:"order_income",order_num:"order_num",order_user:"order_user",pay_income:"pay_income",pay_num:"pay_num",pay_user:"pay_user",pay_new_user:"pay_new_user",pay_new_income:"pay_new_income",pay_old_user:"pay_old_user",pay_old_income:"pay_old_income",search_pay:"search_pay",search_pay_income:"search_pay_income",order_rate:"order_rate",pay_rate:"pay_rate",durationhb:"durationhb",jumprhb:"jumprhb",pvhb:"pvhb",uvhb:"uvhb",cart_pvhb:"cart_pvhb",save_userhb:"save_userhb",search_userhb:"search_userhb",order_incomehb:"order_incomehb",order_numhb:"pay_norder_numhbum",order_userhb:"order_userhb",pay_incomehb:"pay_incomehb",pay_numhb:"pay_numhb",pay_userhb:"pay_userhb",pay_new_userhb:"pay_new_userhb",pay_new_incomehb:"pay_new_incomehb",pay_old_userhb:"pay_old_userhb",pay_old_incomehb:"pay_old_incomehb",search_payhb:"search_payhb",search_pay_incomehb:"search_pay_incomehb",order_ratehb:"order_ratehb",pay_ratehb:"pay_ratehb"},json_data:[],json_meta:[[{" key ":" charset "," value ":" utf- 8 "}]],current:1,total:0,pgSize:10}},created:function(){this.getGoodsData(),this.getGoodsAnalyse(),this.getGoodsLine(),this.checked()},methods:{getGoodsData:function(){var e=this;b().then(function(t){e.cardList=t.data,e.cardList.week_rate=+e.cardList.week_rate,e.cardList.month_rate=+e.cardList.month_rate,e.cardList.year_rate=+e.cardList.year_rate})},getGoodsLine:function(e,t){var a=this,s=e,i=t;e&&(s=new Date(e),i=new Date(t),s=parseInt(Date.parse(s)/1e3),i=parseInt(Date.parse(i)/1e3),console.log(s,i),this.lineChartData.date=e+"至"+t),g(s,i).then(function(s){if(a.labelList=s.data.label,a.chartsLine=s.data.charts,a.lineChartData.expectedData=a.chartsLine.uv,e){var i=w(e,t);a.lineChartData.xdate=i}else{for(var r=[],n=-7;n<0;n++)r.push(C(n));a.lineChartData.xdate=r}})},getGoodsAnalyse:function(e,t){var a=this,s=e,i=t;e&&(s=new Date(e),i=new Date(t),s=parseInt(Date.parse(s)/1e3),i=parseInt(Date.parse(i)/1e3),console.log(s,i)),f(s,i,this.current).then(function(e){console.log(e.data),a.commodityList=e.data,a.total=e.count,a.json_data=e.data})},setMonthNum:function(){this.ismonth=!0,this.monthval=this.cardList.month_tar},setYearNum:function(){this.isyear=!0,this.yearval=this.cardList.year_tar},changeMonthNum:function(e){var t=this,a={type:1,number:+e};a=JSON.stringify(a),y(a).then(function(e){console.log(e),t.ismonth=!1,t.getGoodsData()}).catch(function(e){console.log(e)})},changeYearNum:function(e){var t=this,a={type:2,number:+e};a=JSON.stringify(a),y(a).then(function(e){console.log(e),t.isyear=!1,t.getGoodsData()}).catch(function(e){console.log(e)})},choose:function(e,t,a){console.log(e),this.currentId=a,this.lineChartData.tit=t,this.lineChartData.expectedData=this.chartsLine[e]},checked:function(){var e=this;this.tableList=[].concat(Object(r["a"])(this.accessType.filter(function(t){return-1!==e.checkedAccess.indexOf(t.name)})),Object(r["a"])(this.intoClass.filter(function(t){return-1!==e.checkedInto.indexOf(t.name)})),Object(r["a"])(this.serviceClass.filter(function(t){return-1!==e.checkedService.indexOf(t.name)}))),console.log(this.tableList)},query:function(){console.log(this.date);var e=this.date[0],t=this.date[1];this.getGoodsLine(e,t),this.getGoodsAnalyse(e,t)},reDate:function(){this.getGoodsAnalyse(),this.getGoodsLine(),this.date=[]},reSet:function(){this.checkedAccess=[],this.checkedInto=[],this.checkedService=[],this.checked()},changePage:function(){var e=this.date[0],t=this.date[1];this.getGoodsAnalyse(e,t)}}},z=S,j=(a("355b"),Object(p["a"])(z,s,i,!1,null,"65f2c223",null));t["default"]=j.exports},ce84:function(e,t,a){}}]);